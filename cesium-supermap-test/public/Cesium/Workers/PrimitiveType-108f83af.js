define(["exports","./Cartographic-3309dd0d","./Check-7b2a090c","./when-b60132fc","./Cartesian2-47311507","./Math-119be1a3","./Cartesian4-3ca25aab","./RuntimeError-4a5c8994","./WebGLConstants-4ae0db90"],(function(e,n,t,a,r,i,s,u,o){"use strict";function c(e){this._ellipsoid=a.defaultValue(e,r.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),c.prototype.project=function(e,t){var r=this._semimajorAxis,i=e.longitude*r,s=e.latitude*r,u=e.height;return a.defined(t)?(t.x=i,t.y=s,t.z=u,t):new n.Cartesian3(i,s,u)},c.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,i=e.x*r,s=e.y*r,u=e.z;return a.defined(t)?(t.longitude=i,t.latitude=s,t.height=u,t):new n.Cartographic(i,s,u)};var l=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function d(e,n){this.start=a.defaultValue(e,0),this.stop=a.defaultValue(n,0)}function f(e,n,t,r,i,s,u,o,c){this[0]=a.defaultValue(e,0),this[1]=a.defaultValue(r,0),this[2]=a.defaultValue(u,0),this[3]=a.defaultValue(n,0),this[4]=a.defaultValue(i,0),this[5]=a.defaultValue(o,0),this[6]=a.defaultValue(t,0),this[7]=a.defaultValue(s,0),this[8]=a.defaultValue(c,0)}f.packedLength=9,f.pack=function(e,n,t){return t=a.defaultValue(t,0),n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n[t++]=e[3],n[t++]=e[4],n[t++]=e[5],n[t++]=e[6],n[t++]=e[7],n[t++]=e[8],n},f.unpack=function(e,n,t){return n=a.defaultValue(n,0),a.defined(t)||(t=new f),t[0]=e[n++],t[1]=e[n++],t[2]=e[n++],t[3]=e[n++],t[4]=e[n++],t[5]=e[n++],t[6]=e[n++],t[7]=e[n++],t[8]=e[n++],t},f.clone=function(e,n){if(a.defined(e))return a.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n):new f(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},f.fromArray=function(e,n,t){return n=a.defaultValue(n,0),a.defined(t)||(t=new f),t[0]=e[n],t[1]=e[n+1],t[2]=e[n+2],t[3]=e[n+3],t[4]=e[n+4],t[5]=e[n+5],t[6]=e[n+6],t[7]=e[n+7],t[8]=e[n+8],t},f.fromColumnMajorArray=function(e,n){return f.clone(e,n)},f.fromRowMajorArray=function(e,n){return a.defined(n)?(n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8],n):new f(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},f.fromQuaternion=function(e,n){var t=e.x*e.x,r=e.x*e.y,i=e.x*e.z,s=e.x*e.w,u=e.y*e.y,o=e.y*e.z,c=e.y*e.w,l=e.z*e.z,d=e.z*e.w,C=e.w*e.w,h=t-u-l+C,m=2*(r-d),y=2*(i+c),v=2*(r+d),p=-t+u-l+C,x=2*(o-s),w=2*(i-c),z=2*(o+s),g=-t-u+l+C;return a.defined(n)?(n[0]=h,n[1]=v,n[2]=w,n[3]=m,n[4]=p,n[5]=z,n[6]=y,n[7]=x,n[8]=g,n):new f(h,m,y,v,p,x,w,z,g)},f.fromHeadingPitchRoll=function(e,n){var t=Math.cos(-e.pitch),r=Math.cos(-e.heading),i=Math.cos(e.roll),s=Math.sin(-e.pitch),u=Math.sin(-e.heading),o=Math.sin(e.roll),c=t*r,l=-i*u+o*s*r,d=o*u+i*s*r,C=t*u,h=i*r+o*s*u,m=-o*r+i*s*u,y=-s,v=o*t,p=i*t;return a.defined(n)?(n[0]=c,n[1]=C,n[2]=y,n[3]=l,n[4]=h,n[5]=v,n[6]=d,n[7]=m,n[8]=p,n):new f(c,l,d,C,h,m,y,v,p)},f.fromScale=function(e,n){return a.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=0,n[4]=e.y,n[5]=0,n[6]=0,n[7]=0,n[8]=e.z,n):new f(e.x,0,0,0,e.y,0,0,0,e.z)},f.fromUniformScale=function(e,n){return a.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=0,n[4]=e,n[5]=0,n[6]=0,n[7]=0,n[8]=e,n):new f(e,0,0,0,e,0,0,0,e)},f.fromCrossProduct=function(e,n){return a.defined(n)?(n[0]=0,n[1]=e.z,n[2]=-e.y,n[3]=-e.z,n[4]=0,n[5]=e.x,n[6]=e.y,n[7]=-e.x,n[8]=0,n):new f(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},f.fromRotationX=function(e,n){var t=Math.cos(e),r=Math.sin(e);return a.defined(n)?(n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=t,n[5]=r,n[6]=0,n[7]=-r,n[8]=t,n):new f(1,0,0,0,t,-r,0,r,t)},f.fromRotationY=function(e,n){var t=Math.cos(e),r=Math.sin(e);return a.defined(n)?(n[0]=t,n[1]=0,n[2]=-r,n[3]=0,n[4]=1,n[5]=0,n[6]=r,n[7]=0,n[8]=t,n):new f(t,0,r,0,1,0,-r,0,t)},f.fromRotationZ=function(e,n){var t=Math.cos(e),r=Math.sin(e);return a.defined(n)?(n[0]=t,n[1]=r,n[2]=0,n[3]=-r,n[4]=t,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new f(t,-r,0,r,t,0,0,0,1)},f.toArray=function(e,n){return a.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},f.getElementIndex=function(e,n){return 3*e+n},f.getColumn=function(e,n,t){var a=3*n,r=e[a],i=e[a+1],s=e[a+2];return t.x=r,t.y=i,t.z=s,t},f.setColumn=function(e,n,t,a){var r=3*n;return(a=f.clone(e,a))[r]=t.x,a[r+1]=t.y,a[r+2]=t.z,a},f.getRow=function(e,n,t){var a=e[n],r=e[n+3],i=e[n+6];return t.x=a,t.y=r,t.z=i,t},f.setRow=function(e,n,t,a){return(a=f.clone(e,a))[n]=t.x,a[n+3]=t.y,a[n+6]=t.z,a};var C=new n.Cartesian3;f.getScale=function(e,t){return t.x=n.Cartesian3.magnitude(n.Cartesian3.fromElements(e[0],e[1],e[2],C)),t.y=n.Cartesian3.magnitude(n.Cartesian3.fromElements(e[3],e[4],e[5],C)),t.z=n.Cartesian3.magnitude(n.Cartesian3.fromElements(e[6],e[7],e[8],C)),t};var h=new n.Cartesian3;f.getMaximumScale=function(e){return f.getScale(e,h),n.Cartesian3.maximumComponent(h)},f.multiply=function(e,n,t){var a=e[0]*n[0]+e[3]*n[1]+e[6]*n[2],r=e[1]*n[0]+e[4]*n[1]+e[7]*n[2],i=e[2]*n[0]+e[5]*n[1]+e[8]*n[2],s=e[0]*n[3]+e[3]*n[4]+e[6]*n[5],u=e[1]*n[3]+e[4]*n[4]+e[7]*n[5],o=e[2]*n[3]+e[5]*n[4]+e[8]*n[5],c=e[0]*n[6]+e[3]*n[7]+e[6]*n[8],l=e[1]*n[6]+e[4]*n[7]+e[7]*n[8],d=e[2]*n[6]+e[5]*n[7]+e[8]*n[8];return t[0]=a,t[1]=r,t[2]=i,t[3]=s,t[4]=u,t[5]=o,t[6]=c,t[7]=l,t[8]=d,t},f.add=function(e,n,t){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},f.subtract=function(e,n,t){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},f.multiplyByVector=function(e,n,t){var a=n.x,r=n.y,i=n.z,s=e[0]*a+e[3]*r+e[6]*i,u=e[1]*a+e[4]*r+e[7]*i,o=e[2]*a+e[5]*r+e[8]*i;return t.x=s,t.y=u,t.z=o,t},f.multiplyByScalar=function(e,n,t){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},f.multiplyByScale=function(e,n,t){return t[0]=e[0]*n.x,t[1]=e[1]*n.x,t[2]=e[2]*n.x,t[3]=e[3]*n.y,t[4]=e[4]*n.y,t[5]=e[5]*n.y,t[6]=e[6]*n.z,t[7]=e[7]*n.z,t[8]=e[8]*n.z,t},f.negate=function(e,n){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=-e[3],n[4]=-e[4],n[5]=-e[5],n[6]=-e[6],n[7]=-e[7],n[8]=-e[8],n},f.transpose=function(e,n){var t=e[0],a=e[3],r=e[6],i=e[1],s=e[4],u=e[7],o=e[2],c=e[5],l=e[8];return n[0]=t,n[1]=a,n[2]=r,n[3]=i,n[4]=s,n[5]=u,n[6]=o,n[7]=c,n[8]=l,n};var m=new n.Cartesian3(1,1,1);f.getRotation=function(e,t){var a=n.Cartesian3.divideComponents(m,f.getScale(e,h),h);return t=f.multiplyByScale(e,a,t)};var y=[1,0,0],v=[2,2,1];function p(e){for(var n=0,t=0;t<3;++t){var a=e[f.getElementIndex(v[t],y[t])];n+=2*a*a}return Math.sqrt(n)}function x(e,n){for(var t=i.CesiumMath.EPSILON15,a=0,r=1,s=0;s<3;++s){var u=Math.abs(e[f.getElementIndex(v[s],y[s])]);u>a&&(r=s,a=u)}var o=1,c=0,l=y[r],d=v[r];if(Math.abs(e[f.getElementIndex(d,l)])>t){var C,h=(e[f.getElementIndex(d,d)]-e[f.getElementIndex(l,l)])/2/e[f.getElementIndex(d,l)];c=(C=h<0?-1/(-h+Math.sqrt(1+h*h)):1/(h+Math.sqrt(1+h*h)))*(o=1/Math.sqrt(1+C*C))}return(n=f.clone(f.IDENTITY,n))[f.getElementIndex(l,l)]=n[f.getElementIndex(d,d)]=o,n[f.getElementIndex(d,l)]=c,n[f.getElementIndex(l,d)]=-c,n}var w=new f,z=new f;function g(e,n,t,r,i,s,u,o,c,l,d,f,C,h,m,y){this[0]=a.defaultValue(e,0),this[1]=a.defaultValue(i,0),this[2]=a.defaultValue(c,0),this[3]=a.defaultValue(C,0),this[4]=a.defaultValue(n,0),this[5]=a.defaultValue(s,0),this[6]=a.defaultValue(l,0),this[7]=a.defaultValue(h,0),this[8]=a.defaultValue(t,0),this[9]=a.defaultValue(u,0),this[10]=a.defaultValue(d,0),this[11]=a.defaultValue(m,0),this[12]=a.defaultValue(r,0),this[13]=a.defaultValue(o,0),this[14]=a.defaultValue(f,0),this[15]=a.defaultValue(y,0)}f.computeEigenDecomposition=function(e,n){var t=i.CesiumMath.EPSILON20,r=0,s=0;a.defined(n)||(n={});for(var u=n.unitary=f.clone(f.IDENTITY,n.unitary),o=n.diagonal=f.clone(e,n.diagonal),c=t*function(e){for(var n=0,t=0;t<9;++t){var a=e[t];n+=a*a}return Math.sqrt(n)}(o);s<10&&p(o)>c;)x(o,w),f.transpose(w,z),f.multiply(o,w,o),f.multiply(z,o,o),f.multiply(u,w,u),++r>2&&(++s,r=0);return n},f.abs=function(e,n){return n[0]=Math.abs(e[0]),n[1]=Math.abs(e[1]),n[2]=Math.abs(e[2]),n[3]=Math.abs(e[3]),n[4]=Math.abs(e[4]),n[5]=Math.abs(e[5]),n[6]=Math.abs(e[6]),n[7]=Math.abs(e[7]),n[8]=Math.abs(e[8]),n},f.determinant=function(e){var n=e[0],t=e[3],a=e[6],r=e[1],i=e[4],s=e[7],u=e[2],o=e[5],c=e[8];return n*(i*c-o*s)+r*(o*a-t*c)+u*(t*s-i*a)},f.inverse=function(e,n){var t=e[0],a=e[1],r=e[2],i=e[3],s=e[4],u=e[5],o=e[6],c=e[7],l=e[8],d=f.determinant(e);n[0]=s*l-c*u,n[1]=c*r-a*l,n[2]=a*u-s*r,n[3]=o*u-i*l,n[4]=t*l-o*r,n[5]=i*r-t*u,n[6]=i*c-o*s,n[7]=o*a-t*c,n[8]=t*s-i*a;var C=1/d;return f.multiplyByScalar(n,C,n)},f.equals=function(e,n){return e===n||a.defined(e)&&a.defined(n)&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]},f.equalsEpsilon=function(e,n,t){return e===n||a.defined(e)&&a.defined(n)&&Math.abs(e[0]-n[0])<=t&&Math.abs(e[1]-n[1])<=t&&Math.abs(e[2]-n[2])<=t&&Math.abs(e[3]-n[3])<=t&&Math.abs(e[4]-n[4])<=t&&Math.abs(e[5]-n[5])<=t&&Math.abs(e[6]-n[6])<=t&&Math.abs(e[7]-n[7])<=t&&Math.abs(e[8]-n[8])<=t},f.IDENTITY=Object.freeze(new f(1,0,0,0,1,0,0,0,1)),f.ZERO=Object.freeze(new f(0,0,0,0,0,0,0,0,0)),f.COLUMN0ROW0=0,f.COLUMN0ROW1=1,f.COLUMN0ROW2=2,f.COLUMN1ROW0=3,f.COLUMN1ROW1=4,f.COLUMN1ROW2=5,f.COLUMN2ROW0=6,f.COLUMN2ROW1=7,f.COLUMN2ROW2=8,Object.defineProperties(f.prototype,{length:{get:function(){return f.packedLength}}}),f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.equals=function(e){return f.equals(this,e)},f.equalsArray=function(e,n,t){return e[0]===n[t]&&e[1]===n[t+1]&&e[2]===n[t+2]&&e[3]===n[t+3]&&e[4]===n[t+4]&&e[5]===n[t+5]&&e[6]===n[t+6]&&e[7]===n[t+7]&&e[8]===n[t+8]},f.prototype.equalsEpsilon=function(e,n){return f.equalsEpsilon(this,e,n)},f.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},g.packedLength=16,g.pack=function(e,n,t){return t=a.defaultValue(t,0),n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n[t++]=e[3],n[t++]=e[4],n[t++]=e[5],n[t++]=e[6],n[t++]=e[7],n[t++]=e[8],n[t++]=e[9],n[t++]=e[10],n[t++]=e[11],n[t++]=e[12],n[t++]=e[13],n[t++]=e[14],n[t]=e[15],n},g.unpack=function(e,n,t){return n=a.defaultValue(n,0),a.defined(t)||(t=new g),t[0]=e[n++],t[1]=e[n++],t[2]=e[n++],t[3]=e[n++],t[4]=e[n++],t[5]=e[n++],t[6]=e[n++],t[7]=e[n++],t[8]=e[n++],t[9]=e[n++],t[10]=e[n++],t[11]=e[n++],t[12]=e[n++],t[13]=e[n++],t[14]=e[n++],t[15]=e[n],t},g.clone=function(e,n){if(a.defined(e))return a.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):new g(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},g.fromArray=g.unpack,g.fromColumnMajorArray=function(e,n){return g.clone(e,n)},g.fromRowMajorArray=function(e,n){return a.defined(n)?(n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15],n):new g(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},g.fromRotationTranslation=function(e,t,r){return t=a.defaultValue(t,n.Cartesian3.ZERO),a.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new g(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},g.fromTranslationQuaternionRotationScale=function(e,n,t,r){a.defined(r)||(r=new g);var i=t.x,s=t.y,u=t.z,o=n.x*n.x,c=n.x*n.y,l=n.x*n.z,d=n.x*n.w,f=n.y*n.y,C=n.y*n.z,h=n.y*n.w,m=n.z*n.z,y=n.z*n.w,v=n.w*n.w,p=o-f-m+v,x=2*(c-y),w=2*(l+h),z=2*(c+y),M=-o+f-m+v,b=2*(C-d),O=2*(l-h),R=2*(C+d),S=-o-f+m+v;return r[0]=p*i,r[1]=z*i,r[2]=O*i,r[3]=0,r[4]=x*s,r[5]=M*s,r[6]=R*s,r[7]=0,r[8]=w*u,r[9]=b*u,r[10]=S*u,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},g.fromTranslationRotationScale=function(e,n){return g.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,n)},g.fromTranslation=function(e,n){return g.fromRotationTranslation(f.IDENTITY,e,n)},g.fromScale=function(e,n){return a.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e.y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e.z,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n):new g(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},g.fromUniformScale=function(e,n){return a.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n):new g(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var M=new n.Cartesian3,b=new n.Cartesian3,O=new n.Cartesian3;g.fromCamera=function(e,t){var r=e.position,i=e.direction,s=e.up;n.Cartesian3.normalize(i,M),n.Cartesian3.normalize(n.Cartesian3.cross(M,s,b),b),n.Cartesian3.normalize(n.Cartesian3.cross(b,M,O),O);var u=b.x,o=b.y,c=b.z,l=M.x,d=M.y,f=M.z,C=O.x,h=O.y,m=O.z,y=r.x,v=r.y,p=r.z,x=u*-y+o*-v+c*-p,w=C*-y+h*-v+m*-p,z=l*y+d*v+f*p;return a.defined(t)?(t[0]=u,t[1]=C,t[2]=-l,t[3]=0,t[4]=o,t[5]=h,t[6]=-d,t[7]=0,t[8]=c,t[9]=m,t[10]=-f,t[11]=0,t[12]=x,t[13]=w,t[14]=z,t[15]=1,t):new g(u,o,c,x,C,h,m,w,-l,-d,-f,z,0,0,0,1)},g.computePerspectiveFieldOfView=function(e,n,t,a,r){var i=1/Math.tan(.5*e),s=i/n,u=(a+t)/(t-a),o=2*a*t/(t-a);return r[0]=s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=u,r[11]=-1,r[12]=0,r[13]=0,r[14]=o,r[15]=0,r},g.computeOrthographicOffCenter=function(e,n,t,a,r,i,s){var u=1/(n-e),o=1/(a-t),c=1/(i-r),l=-(n+e)*u,d=-(a+t)*o,f=-(i+r)*c;return u*=2,o*=2,c*=-2,s[0]=u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=c,s[11]=0,s[12]=l,s[13]=d,s[14]=f,s[15]=1,s},g.computePerspectiveOffCenter=function(e,n,t,a,r,i,s){var u=2*r/(n-e),o=2*r/(a-t),c=(n+e)/(n-e),l=(a+t)/(a-t),d=-(i+r)/(i-r),f=-2*i*r/(i-r);return s[0]=u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o,s[6]=0,s[7]=0,s[8]=c,s[9]=l,s[10]=d,s[11]=-1,s[12]=0,s[13]=0,s[14]=f,s[15]=0,s},g.computeInfinitePerspectiveOffCenter=function(e,n,t,a,r,i){var s=2*r/(n-e),u=2*r/(a-t),o=(n+e)/(n-e),c=(a+t)/(a-t),l=-2*r;return i[0]=s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=u,i[6]=0,i[7]=0,i[8]=o,i[9]=c,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=l,i[15]=0,i},g.computeViewportTransformation=function(e,n,t,r){e=a.defaultValue(e,a.defaultValue.EMPTY_OBJECT);var i=a.defaultValue(e.x,0),s=a.defaultValue(e.y,0),u=a.defaultValue(e.width,0),o=a.defaultValue(e.height,0);n=a.defaultValue(n,0);var c=.5*u,l=.5*o,d=.5*((t=a.defaultValue(t,1))-n),f=c,C=l,h=d,m=i+c,y=s+l,v=n+d;return r[0]=f,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=C,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=h,r[11]=0,r[12]=m,r[13]=y,r[14]=v,r[15]=1,r},g.computeView=function(e,t,a,r,i){return i[0]=r.x,i[1]=a.x,i[2]=-t.x,i[3]=0,i[4]=r.y,i[5]=a.y,i[6]=-t.y,i[7]=0,i[8]=r.z,i[9]=a.z,i[10]=-t.z,i[11]=0,i[12]=-n.Cartesian3.dot(r,e),i[13]=-n.Cartesian3.dot(a,e),i[14]=n.Cartesian3.dot(t,e),i[15]=1,i},g.toArray=function(e,n){return a.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},g.getElementIndex=function(e,n){return 4*e+n},g.getColumn=function(e,n,t){var a=4*n,r=e[a],i=e[a+1],s=e[a+2],u=e[a+3];return t.x=r,t.y=i,t.z=s,t.w=u,t},g.setColumn=function(e,n,t,a){var r=4*n;return(a=g.clone(e,a))[r]=t.x,a[r+1]=t.y,a[r+2]=t.z,a[r+3]=t.w,a},g.setTranslation=function(e,n,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=n.x,t[13]=n.y,t[14]=n.z,t[15]=e[15],t};var R=new n.Cartesian3;g.setScale=function(e,t,a){var r=g.getScale(e,R),i=n.Cartesian3.divideComponents(t,r,R);return g.multiplyByScale(e,i,a)},g.getRow=function(e,n,t){var a=e[n],r=e[n+4],i=e[n+8],s=e[n+12];return t.x=a,t.y=r,t.z=i,t.w=s,t},g.setRow=function(e,n,t,a){return(a=g.clone(e,a))[n]=t.x,a[n+4]=t.y,a[n+8]=t.z,a[n+12]=t.w,a};var S=new n.Cartesian3;g.getScale=function(e,t){return t.x=n.Cartesian3.magnitude(n.Cartesian3.fromElements(e[0],e[1],e[2],S)),t.y=n.Cartesian3.magnitude(n.Cartesian3.fromElements(e[4],e[5],e[6],S)),t.z=n.Cartesian3.magnitude(n.Cartesian3.fromElements(e[8],e[9],e[10],S)),t};var E=new n.Cartesian3;g.getMaximumScale=function(e){return g.getScale(e,E),n.Cartesian3.maximumComponent(E)},g.multiply=function(e,n,t){var a=e[0],r=e[1],i=e[2],s=e[3],u=e[4],o=e[5],c=e[6],l=e[7],d=e[8],f=e[9],C=e[10],h=e[11],m=e[12],y=e[13],v=e[14],p=e[15],x=n[0],w=n[1],z=n[2],g=n[3],M=n[4],b=n[5],O=n[6],R=n[7],S=n[8],E=n[9],I=n[10],N=n[11],L=n[12],V=n[13],T=n[14],q=n[15],P=a*x+u*w+d*z+m*g,W=r*x+o*w+f*z+y*g,U=i*x+c*w+C*z+v*g,A=s*x+l*w+h*z+p*g,B=a*M+u*b+d*O+m*R,j=r*M+o*b+f*O+y*R,_=i*M+c*b+C*O+v*R,G=s*M+l*b+h*O+p*R,D=a*S+u*E+d*I+m*N,Z=r*S+o*E+f*I+y*N,k=i*S+c*E+C*I+v*N,Y=s*S+l*E+h*I+p*N,F=a*L+u*V+d*T+m*q,H=r*L+o*V+f*T+y*q,Q=i*L+c*V+C*T+v*q,X=s*L+l*V+h*T+p*q;return t[0]=P,t[1]=W,t[2]=U,t[3]=A,t[4]=B,t[5]=j,t[6]=_,t[7]=G,t[8]=D,t[9]=Z,t[10]=k,t[11]=Y,t[12]=F,t[13]=H,t[14]=Q,t[15]=X,t},g.add=function(e,n,t){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},g.subtract=function(e,n,t){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},g.multiplyTransformation=function(e,n,t){var a=e[0],r=e[1],i=e[2],s=e[4],u=e[5],o=e[6],c=e[8],l=e[9],d=e[10],f=e[12],C=e[13],h=e[14],m=n[0],y=n[1],v=n[2],p=n[4],x=n[5],w=n[6],z=n[8],g=n[9],M=n[10],b=n[12],O=n[13],R=n[14],S=a*m+s*y+c*v,E=r*m+u*y+l*v,I=i*m+o*y+d*v,N=a*p+s*x+c*w,L=r*p+u*x+l*w,V=i*p+o*x+d*w,T=a*z+s*g+c*M,q=r*z+u*g+l*M,P=i*z+o*g+d*M,W=a*b+s*O+c*R+f,U=r*b+u*O+l*R+C,A=i*b+o*O+d*R+h;return t[0]=S,t[1]=E,t[2]=I,t[3]=0,t[4]=N,t[5]=L,t[6]=V,t[7]=0,t[8]=T,t[9]=q,t[10]=P,t[11]=0,t[12]=W,t[13]=U,t[14]=A,t[15]=1,t},g.multiplyByMatrix3=function(e,n,t){var a=e[0],r=e[1],i=e[2],s=e[4],u=e[5],o=e[6],c=e[8],l=e[9],d=e[10],f=n[0],C=n[1],h=n[2],m=n[3],y=n[4],v=n[5],p=n[6],x=n[7],w=n[8],z=a*f+s*C+c*h,g=r*f+u*C+l*h,M=i*f+o*C+d*h,b=a*m+s*y+c*v,O=r*m+u*y+l*v,R=i*m+o*y+d*v,S=a*p+s*x+c*w,E=r*p+u*x+l*w,I=i*p+o*x+d*w;return t[0]=z,t[1]=g,t[2]=M,t[3]=0,t[4]=b,t[5]=O,t[6]=R,t[7]=0,t[8]=S,t[9]=E,t[10]=I,t[11]=0,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},g.multiplyByTranslation=function(e,n,t){var a=n.x,r=n.y,i=n.z,s=a*e[0]+r*e[4]+i*e[8]+e[12],u=a*e[1]+r*e[5]+i*e[9]+e[13],o=a*e[2]+r*e[6]+i*e[10]+e[14];return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=s,t[13]=u,t[14]=o,t[15]=e[15],t};var I=new n.Cartesian3;g.multiplyByUniformScale=function(e,n,t){return I.x=n,I.y=n,I.z=n,g.multiplyByScale(e,I,t)},g.multiplyByScale=function(e,n,t){var a=n.x,r=n.y,i=n.z;return 1===a&&1===r&&1===i?g.clone(e,t):(t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=0,t[4]=r*e[4],t[5]=r*e[5],t[6]=r*e[6],t[7]=0,t[8]=i*e[8],t[9]=i*e[9],t[10]=i*e[10],t[11]=0,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=1,t)},g.multiplyByVector=function(e,n,t){var a=n.x,r=n.y,i=n.z,s=n.w,u=e[0]*a+e[4]*r+e[8]*i+e[12]*s,o=e[1]*a+e[5]*r+e[9]*i+e[13]*s,c=e[2]*a+e[6]*r+e[10]*i+e[14]*s,l=e[3]*a+e[7]*r+e[11]*i+e[15]*s;return t.x=u,t.y=o,t.z=c,t.w=l,t},g.multiplyByPointAsVector=function(e,n,t){var a=n.x,r=n.y,i=n.z,s=e[0]*a+e[4]*r+e[8]*i,u=e[1]*a+e[5]*r+e[9]*i,o=e[2]*a+e[6]*r+e[10]*i;return t.x=s,t.y=u,t.z=o,t},g.multiplyByPoint=function(e,n,t){var a=n.x,r=n.y,i=n.z,s=e[0]*a+e[4]*r+e[8]*i+e[12],u=e[1]*a+e[5]*r+e[9]*i+e[13],o=e[2]*a+e[6]*r+e[10]*i+e[14];return t.x=s,t.y=u,t.z=o,t},g.multiplyByScalar=function(e,n,t){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},g.multiplyByPlane=function(e,t,a){var r=new g,i=new g;g.inverse(e,r),g.transpose(r,i);var u=new s.Cartesian4(t.normal.x,t.normal.y,t.normal.z,t.distance);g.multiplyByVector(i,u,u),a.normal.x=u.x,a.normal.y=u.y,a.normal.z=u.z;var o=n.Cartesian3.magnitude(a.normal);return n.Cartesian3.normalize(a.normal,a.normal),a.distance=u.w/o,a},g.negate=function(e,n){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=-e[3],n[4]=-e[4],n[5]=-e[5],n[6]=-e[6],n[7]=-e[7],n[8]=-e[8],n[9]=-e[9],n[10]=-e[10],n[11]=-e[11],n[12]=-e[12],n[13]=-e[13],n[14]=-e[14],n[15]=-e[15],n},g.transpose=function(e,n){var t=e[1],a=e[2],r=e[3],i=e[6],s=e[7],u=e[11];return n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=a,n[9]=i,n[10]=e[10],n[11]=e[14],n[12]=r,n[13]=s,n[14]=u,n[15]=e[15],n},g.abs=function(e,n){return n[0]=Math.abs(e[0]),n[1]=Math.abs(e[1]),n[2]=Math.abs(e[2]),n[3]=Math.abs(e[3]),n[4]=Math.abs(e[4]),n[5]=Math.abs(e[5]),n[6]=Math.abs(e[6]),n[7]=Math.abs(e[7]),n[8]=Math.abs(e[8]),n[9]=Math.abs(e[9]),n[10]=Math.abs(e[10]),n[11]=Math.abs(e[11]),n[12]=Math.abs(e[12]),n[13]=Math.abs(e[13]),n[14]=Math.abs(e[14]),n[15]=Math.abs(e[15]),n},g.equals=function(e,n){return e===n||a.defined(e)&&a.defined(n)&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[3]===n[3]&&e[7]===n[7]&&e[11]===n[11]&&e[15]===n[15]},g.equalsEpsilon=function(e,n,t){return e===n||a.defined(e)&&a.defined(n)&&Math.abs(e[0]-n[0])<=t&&Math.abs(e[1]-n[1])<=t&&Math.abs(e[2]-n[2])<=t&&Math.abs(e[3]-n[3])<=t&&Math.abs(e[4]-n[4])<=t&&Math.abs(e[5]-n[5])<=t&&Math.abs(e[6]-n[6])<=t&&Math.abs(e[7]-n[7])<=t&&Math.abs(e[8]-n[8])<=t&&Math.abs(e[9]-n[9])<=t&&Math.abs(e[10]-n[10])<=t&&Math.abs(e[11]-n[11])<=t&&Math.abs(e[12]-n[12])<=t&&Math.abs(e[13]-n[13])<=t&&Math.abs(e[14]-n[14])<=t&&Math.abs(e[15]-n[15])<=t},g.getTranslation=function(e,n){return n.x=e[12],n.y=e[13],n.z=e[14],n},g.getMatrix3=function(e,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},g.getRotation=function(e,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n};var N=new f,L=new f,V=new s.Cartesian4,T=new s.Cartesian4(0,0,0,1);function q(e,t){this.center=n.Cartesian3.clone(a.defaultValue(e,n.Cartesian3.ZERO)),this.radius=a.defaultValue(t,0)}g.inverse=function(e,n){var t=e[0],a=e[4],r=e[8],o=e[12],c=e[1],l=e[5],d=e[9],C=e[13],h=e[2],m=e[6],y=e[10],v=e[14],p=e[3],x=e[7],w=e[11],z=e[15],M=y*z,b=v*w,O=m*z,R=v*x,S=m*w,E=y*x,I=h*z,q=v*p,P=h*w,W=y*p,U=h*x,A=m*p,B=M*l+R*d+S*C-(b*l+O*d+E*C),j=b*c+I*d+W*C-(M*c+q*d+P*C),_=O*c+q*l+U*C-(R*c+I*l+A*C),G=E*c+P*l+A*d-(S*c+W*l+U*d),D=b*a+O*r+E*o-(M*a+R*r+S*o),Z=M*t+q*r+P*o-(b*t+I*r+W*o),k=R*t+I*a+A*o-(O*t+q*a+U*o),Y=S*t+W*a+U*r-(E*t+P*a+A*r),F=(M=r*C)*x+(R=o*l)*w+(S=a*d)*z-((b=o*d)*x+(O=a*C)*w+(E=r*l)*z),H=b*p+(I=t*C)*w+(W=r*c)*z-(M*p+(q=o*c)*w+(P=t*d)*z),Q=O*p+q*x+(U=t*l)*z-(R*p+I*x+(A=a*c)*z),X=E*p+P*x+A*w-(S*p+W*x+U*w),J=O*y+E*v+b*m-(S*v+M*m+R*y),K=P*v+M*h+q*y-(I*y+W*v+b*h),$=I*m+A*v+R*h-(U*v+O*h+q*m),ee=U*y+S*h+W*m-(P*m+A*y+E*h),ne=t*B+a*j+r*_+o*G;if(Math.abs(ne)<i.CesiumMath.EPSILON21){if(f.equalsEpsilon(g.getRotation(e,N),L,i.CesiumMath.EPSILON7)&&s.Cartesian4.equals(g.getRow(e,3,V),T))return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=-e[12],n[13]=-e[13],n[14]=-e[14],n[15]=1,n;throw new u.RuntimeError("matrix is not invertible because its determinate is zero.")}return ne=1/ne,n[0]=B*ne,n[1]=j*ne,n[2]=_*ne,n[3]=G*ne,n[4]=D*ne,n[5]=Z*ne,n[6]=k*ne,n[7]=Y*ne,n[8]=F*ne,n[9]=H*ne,n[10]=Q*ne,n[11]=X*ne,n[12]=J*ne,n[13]=K*ne,n[14]=$*ne,n[15]=ee*ne,n},g.inverseTransformation=function(e,n){var t=e[0],a=e[1],r=e[2],i=e[4],s=e[5],u=e[6],o=e[8],c=e[9],l=e[10],d=e[12],f=e[13],C=e[14],h=-t*d-a*f-r*C,m=-i*d-s*f-u*C,y=-o*d-c*f-l*C;return n[0]=t,n[1]=i,n[2]=o,n[3]=0,n[4]=a,n[5]=s,n[6]=c,n[7]=0,n[8]=r,n[9]=u,n[10]=l,n[11]=0,n[12]=h,n[13]=m,n[14]=y,n[15]=1,n},g.IDENTITY=Object.freeze(new g(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),g.ZERO=Object.freeze(new g(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),g.COLUMN0ROW0=0,g.COLUMN0ROW1=1,g.COLUMN0ROW2=2,g.COLUMN0ROW3=3,g.COLUMN1ROW0=4,g.COLUMN1ROW1=5,g.COLUMN1ROW2=6,g.COLUMN1ROW3=7,g.COLUMN2ROW0=8,g.COLUMN2ROW1=9,g.COLUMN2ROW2=10,g.COLUMN2ROW3=11,g.COLUMN3ROW0=12,g.COLUMN3ROW1=13,g.COLUMN3ROW2=14,g.COLUMN3ROW3=15,Object.defineProperties(g.prototype,{length:{get:function(){return g.packedLength}}}),g.prototype.clone=function(e){return g.clone(this,e)},g.prototype.equals=function(e){return g.equals(this,e)},g.equalsArray=function(e,n,t){return e[0]===n[t]&&e[1]===n[t+1]&&e[2]===n[t+2]&&e[3]===n[t+3]&&e[4]===n[t+4]&&e[5]===n[t+5]&&e[6]===n[t+6]&&e[7]===n[t+7]&&e[8]===n[t+8]&&e[9]===n[t+9]&&e[10]===n[t+10]&&e[11]===n[t+11]&&e[12]===n[t+12]&&e[13]===n[t+13]&&e[14]===n[t+14]&&e[15]===n[t+15]},g.prototype.equalsEpsilon=function(e,n){return g.equalsEpsilon(this,e,n)},g.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};var P=new n.Cartesian3,W=new n.Cartesian3,U=new n.Cartesian3,A=new n.Cartesian3,B=new n.Cartesian3,j=new n.Cartesian3,_=new n.Cartesian3,G=new n.Cartesian3,D=new n.Cartesian3,Z=new n.Cartesian3,k=new n.Cartesian3,Y=new n.Cartesian3,F=4/3*i.CesiumMath.PI;q.fromPoints=function(e,t){if(a.defined(t)||(t=new q),!a.defined(e)||0===e.length)return t.center=n.Cartesian3.clone(n.Cartesian3.ZERO,t.center),t.radius=0,t;var r,i=n.Cartesian3.clone(e[0],_),s=n.Cartesian3.clone(i,P),u=n.Cartesian3.clone(i,W),o=n.Cartesian3.clone(i,U),c=n.Cartesian3.clone(i,A),l=n.Cartesian3.clone(i,B),d=n.Cartesian3.clone(i,j),f=e.length;for(r=1;r<f;r++){n.Cartesian3.clone(e[r],i);var C=i.x,h=i.y,m=i.z;C<s.x&&n.Cartesian3.clone(i,s),C>c.x&&n.Cartesian3.clone(i,c),h<u.y&&n.Cartesian3.clone(i,u),h>l.y&&n.Cartesian3.clone(i,l),m<o.z&&n.Cartesian3.clone(i,o),m>d.z&&n.Cartesian3.clone(i,d)}var y=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(c,s,G)),v=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(l,u,G)),p=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(d,o,G)),x=s,w=c,z=y;v>z&&(z=v,x=u,w=l),p>z&&(z=p,x=o,w=d);var g=D;g.x=.5*(x.x+w.x),g.y=.5*(x.y+w.y),g.z=.5*(x.z+w.z);var M=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(w,g,G)),b=Math.sqrt(M),O=Z;O.x=s.x,O.y=u.y,O.z=o.z;var R=k;R.x=c.x,R.y=l.y,R.z=d.z;var S=n.Cartesian3.midpoint(O,R,Y),E=0;for(r=0;r<f;r++){n.Cartesian3.clone(e[r],i);var I=n.Cartesian3.magnitude(n.Cartesian3.subtract(i,S,G));I>E&&(E=I);var N=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(i,g,G));if(N>M){var L=Math.sqrt(N);M=(b=.5*(b+L))*b;var V=L-b;g.x=(b*g.x+V*i.x)/L,g.y=(b*g.y+V*i.y)/L,g.z=(b*g.z+V*i.z)/L}}return b<E?(n.Cartesian3.clone(g,t.center),t.radius=b):(n.Cartesian3.clone(S,t.center),t.radius=E),t};var H=new c,Q=new n.Cartesian3,X=new n.Cartesian3,J=new n.Cartographic,K=new n.Cartographic;q.fromRectangle2D=function(e,n,t){return q.fromRectangleWithHeights2D(e,n,0,0,t)},q.fromRectangleWithHeights2D=function(e,t,i,s,u){if(a.defined(u)||(u=new q),!a.defined(e))return u.center=n.Cartesian3.clone(n.Cartesian3.ZERO,u.center),u.radius=0,u;t=a.defaultValue(t,H),r.Rectangle.southwest(e,J),J.height=i,r.Rectangle.northeast(e,K),K.height=s;var o=t.project(J,Q),c=t.project(K,X),l=c.x-o.x,d=c.y-o.y,f=c.z-o.z;u.radius=.5*Math.sqrt(l*l+d*d+f*f);var C=u.center;return C.x=o.x+.5*l,C.y=o.y+.5*d,C.z=o.z+.5*f,u};var $=[];q.fromRectangle3D=function(e,t,i,s){if(t=a.defaultValue(t,r.Ellipsoid.WGS84),i=a.defaultValue(i,0),a.defined(s)||(s=new q),!a.defined(e))return s.center=n.Cartesian3.clone(n.Cartesian3.ZERO,s.center),s.radius=0,s;var u=r.Rectangle.subsample(e,t,i,$);return q.fromPoints(u,s)},q.fromVertices=function(e,t,r,i){if(a.defined(i)||(i=new q),!a.defined(e)||0===e.length)return i.center=n.Cartesian3.clone(n.Cartesian3.ZERO,i.center),i.radius=0,i;t=a.defaultValue(t,n.Cartesian3.ZERO),r=a.defaultValue(r,3);var s=_;s.x=e[0]+t.x,s.y=e[1]+t.y,s.z=e[2]+t.z;var u,o=n.Cartesian3.clone(s,P),c=n.Cartesian3.clone(s,W),l=n.Cartesian3.clone(s,U),d=n.Cartesian3.clone(s,A),f=n.Cartesian3.clone(s,B),C=n.Cartesian3.clone(s,j),h=e.length;for(u=0;u<h;u+=r){var m=e[u]+t.x,y=e[u+1]+t.y,v=e[u+2]+t.z;s.x=m,s.y=y,s.z=v,m<o.x&&n.Cartesian3.clone(s,o),m>d.x&&n.Cartesian3.clone(s,d),y<c.y&&n.Cartesian3.clone(s,c),y>f.y&&n.Cartesian3.clone(s,f),v<l.z&&n.Cartesian3.clone(s,l),v>C.z&&n.Cartesian3.clone(s,C)}var p=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(d,o,G)),x=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(f,c,G)),w=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(C,l,G)),z=o,g=d,M=p;x>M&&(M=x,z=c,g=f),w>M&&(M=w,z=l,g=C);var b=D;b.x=.5*(z.x+g.x),b.y=.5*(z.y+g.y),b.z=.5*(z.z+g.z);var O=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(g,b,G)),R=Math.sqrt(O),S=Z;S.x=o.x,S.y=c.y,S.z=l.z;var E=k;E.x=d.x,E.y=f.y,E.z=C.z;var I=n.Cartesian3.midpoint(S,E,Y),N=0;for(u=0;u<h;u+=r){s.x=e[u]+t.x,s.y=e[u+1]+t.y,s.z=e[u+2]+t.z;var L=n.Cartesian3.magnitude(n.Cartesian3.subtract(s,I,G));L>N&&(N=L);var V=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(s,b,G));if(V>O){var T=Math.sqrt(V);O=(R=.5*(R+T))*R;var F=T-R;b.x=(R*b.x+F*s.x)/T,b.y=(R*b.y+F*s.y)/T,b.z=(R*b.z+F*s.z)/T}}return R<N?(n.Cartesian3.clone(b,i.center),i.radius=R):(n.Cartesian3.clone(I,i.center),i.radius=N),i},q.fromEncodedCartesianVertices=function(e,t,r){if(a.defined(r)||(r=new q),!a.defined(e)||!a.defined(t)||e.length!==t.length||0===e.length)return r.center=n.Cartesian3.clone(n.Cartesian3.ZERO,r.center),r.radius=0,r;var i=_;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];var s,u=n.Cartesian3.clone(i,P),o=n.Cartesian3.clone(i,W),c=n.Cartesian3.clone(i,U),l=n.Cartesian3.clone(i,A),d=n.Cartesian3.clone(i,B),f=n.Cartesian3.clone(i,j),C=e.length;for(s=0;s<C;s+=3){var h=e[s]+t[s],m=e[s+1]+t[s+1],y=e[s+2]+t[s+2];i.x=h,i.y=m,i.z=y,h<u.x&&n.Cartesian3.clone(i,u),h>l.x&&n.Cartesian3.clone(i,l),m<o.y&&n.Cartesian3.clone(i,o),m>d.y&&n.Cartesian3.clone(i,d),y<c.z&&n.Cartesian3.clone(i,c),y>f.z&&n.Cartesian3.clone(i,f)}var v=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(l,u,G)),p=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(d,o,G)),x=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(f,c,G)),w=u,z=l,g=v;p>g&&(g=p,w=o,z=d),x>g&&(g=x,w=c,z=f);var M=D;M.x=.5*(w.x+z.x),M.y=.5*(w.y+z.y),M.z=.5*(w.z+z.z);var b=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(z,M,G)),O=Math.sqrt(b),R=Z;R.x=u.x,R.y=o.y,R.z=c.z;var S=k;S.x=l.x,S.y=d.y,S.z=f.z;var E=n.Cartesian3.midpoint(R,S,Y),I=0;for(s=0;s<C;s+=3){i.x=e[s]+t[s],i.y=e[s+1]+t[s+1],i.z=e[s+2]+t[s+2];var N=n.Cartesian3.magnitude(n.Cartesian3.subtract(i,E,G));N>I&&(I=N);var L=n.Cartesian3.magnitudeSquared(n.Cartesian3.subtract(i,M,G));if(L>b){var V=Math.sqrt(L);b=(O=.5*(O+V))*O;var T=V-O;M.x=(O*M.x+T*i.x)/V,M.y=(O*M.y+T*i.y)/V,M.z=(O*M.z+T*i.z)/V}}return O<I?(n.Cartesian3.clone(M,r.center),r.radius=O):(n.Cartesian3.clone(E,r.center),r.radius=I),r},q.fromCornerPoints=function(e,t,r){a.defined(r)||(r=new q);var i=n.Cartesian3.midpoint(e,t,r.center);return r.radius=n.Cartesian3.distance(i,t),r},q.fromEllipsoid=function(e,t){return a.defined(t)||(t=new q),n.Cartesian3.clone(n.Cartesian3.ZERO,t.center),t.radius=e.maximumRadius,t};var ee=new n.Cartesian3;q.fromBoundingSpheres=function(e,t){if(a.defined(t)||(t=new q),!a.defined(e)||0===e.length)return t.center=n.Cartesian3.clone(n.Cartesian3.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return q.clone(e[0],t);if(2===r)return q.union(e[0],e[1],t);var i,s=[];for(i=0;i<r;i++)s.push(e[i].center);var u=(t=q.fromPoints(s,t)).center,o=t.radius;for(i=0;i<r;i++){var c=e[i];o=Math.max(o,n.Cartesian3.distance(u,c.center,ee)+c.radius)}return t.radius=o,t};var ne=new n.Cartesian3,te=new n.Cartesian3,ae=new n.Cartesian3;q.fromOrientedBoundingBox=function(e,t){a.defined(t)||(t=new q);var r=e.halfAxes,i=f.getColumn(r,0,ne),s=f.getColumn(r,1,te),u=f.getColumn(r,2,ae);return n.Cartesian3.add(i,s,i),n.Cartesian3.add(i,u,i),t.center=n.Cartesian3.clone(e.center,t.center),t.radius=n.Cartesian3.magnitude(i),t},q.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t.center=n.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new q(e.center,e.radius)},q.packedLength=4,q.pack=function(e,n,t){t=a.defaultValue(t,0);var r=e.center;return n[t++]=r.x,n[t++]=r.y,n[t++]=r.z,n[t]=e.radius,n},q.unpack=function(e,n,t){n=a.defaultValue(n,0),a.defined(t)||(t=new q);var r=t.center;return r.x=e[n++],r.y=e[n++],r.z=e[n++],t.radius=e[n],t};var re=new n.Cartesian3,ie=new n.Cartesian3;q.union=function(e,t,r){a.defined(r)||(r=new q);var i=e.center,s=e.radius,u=t.center,o=t.radius,c=n.Cartesian3.subtract(u,i,re),l=n.Cartesian3.magnitude(c);if(s>=l+o)return e.clone(r),r;if(o>=l+s)return t.clone(r),r;var d=.5*(s+l+o),f=n.Cartesian3.multiplyByScalar(c,(-s+d)/l,ie);return n.Cartesian3.add(f,i,f),n.Cartesian3.clone(f,r.center),r.radius=d,r};var se=new n.Cartesian3;q.expand=function(e,t,a){a=q.clone(e,a);var r=n.Cartesian3.magnitude(n.Cartesian3.subtract(t,a.center,se));return r>a.radius&&(a.radius=r),a},q.intersectPlane=function(e,t){var a=e.center,r=e.radius,i=t.normal,s=n.Cartesian3.dot(i,a)+t.distance;return s<-r?l.OUTSIDE:s<r?l.INTERSECTING:l.INSIDE},q.transform=function(e,n,t){return a.defined(t)||(t=new q),t.center=g.multiplyByPoint(n,e.center,t.center),t.radius=g.getMaximumScale(n)*e.radius,t};var ue=new n.Cartesian3;q.distanceSquaredTo=function(e,t){var a=n.Cartesian3.subtract(e.center,t,ue);return n.Cartesian3.magnitudeSquared(a)-e.radius*e.radius},q.transformWithoutScale=function(e,n,t){return a.defined(t)||(t=new q),t.center=g.multiplyByPoint(n,e.center,t.center),t.radius=e.radius,t};var oe=new n.Cartesian3;q.computePlaneDistances=function(e,t,r,i){a.defined(i)||(i=new d);var s=n.Cartesian3.subtract(e.center,t,oe),u=n.Cartesian3.dot(r,s);return i.start=u-e.radius,i.stop=u+e.radius,i};for(var ce=new n.Cartesian3,le=new n.Cartesian3,de=new n.Cartesian3,fe=new n.Cartesian3,Ce=new n.Cartesian3,he=new n.Cartographic,me=new Array(8),ye=0;ye<8;++ye)me[ye]=new n.Cartesian3;var ve=new c;q.projectTo2D=function(e,t,r){var i,s=(t=a.defaultValue(t,ve)).ellipsoid,u=e.center,o=e.radius;i=n.Cartesian3.equals(u,n.Cartesian3.ZERO)?n.Cartesian3.clone(n.Cartesian3.UNIT_X,ce):s.geodeticSurfaceNormal(u,ce);var c=n.Cartesian3.cross(n.Cartesian3.UNIT_Z,i,le);n.Cartesian3.normalize(c,c);var l=n.Cartesian3.cross(i,c,de);n.Cartesian3.normalize(l,l),n.Cartesian3.multiplyByScalar(i,o,i),n.Cartesian3.multiplyByScalar(l,o,l),n.Cartesian3.multiplyByScalar(c,o,c);var d=n.Cartesian3.negate(l,Ce),f=n.Cartesian3.negate(c,fe),C=me,h=C[0];n.Cartesian3.add(i,l,h),n.Cartesian3.add(h,c,h),h=C[1],n.Cartesian3.add(i,l,h),n.Cartesian3.add(h,f,h),h=C[2],n.Cartesian3.add(i,d,h),n.Cartesian3.add(h,f,h),h=C[3],n.Cartesian3.add(i,d,h),n.Cartesian3.add(h,c,h),n.Cartesian3.negate(i,i),h=C[4],n.Cartesian3.add(i,l,h),n.Cartesian3.add(h,c,h),h=C[5],n.Cartesian3.add(i,l,h),n.Cartesian3.add(h,f,h),h=C[6],n.Cartesian3.add(i,d,h),n.Cartesian3.add(h,f,h),h=C[7],n.Cartesian3.add(i,d,h),n.Cartesian3.add(h,c,h);for(var m=C.length,y=0;y<m;++y){var v=C[y];n.Cartesian3.add(u,v,v);var p=s.cartesianToCartographic(v,he);t.project(p,v)}var x=(u=(r=q.fromPoints(C,r)).center).x,w=u.y,z=u.z;return u.x=z,u.y=x,u.z=w,r},q.isOccluded=function(e,n){return!n.isBoundingSphereVisible(e)},q.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&n.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},q.prototype.intersectPlane=function(e){return q.intersectPlane(this,e)},q.prototype.distanceSquaredTo=function(e){return q.distanceSquaredTo(this,e)},q.prototype.computePlaneDistances=function(e,n,t){return q.computePlaneDistances(this,e,n,t)},q.prototype.isOccluded=function(e){return q.isOccluded(this,e)},q.prototype.equals=function(e){return q.equals(this,e)},q.prototype.clone=function(e){return q.clone(this,e)},q.prototype.volume=function(){var e=this.radius;return F*e*e*e};var pe={POINTS:o.WebGLConstants.POINTS,LINES:o.WebGLConstants.LINES,LINE_LOOP:o.WebGLConstants.LINE_LOOP,LINE_STRIP:o.WebGLConstants.LINE_STRIP,TRIANGLES:o.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:o.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:o.WebGLConstants.TRIANGLE_FAN,validate:function(e){return e===pe.POINTS||e===pe.LINES||e===pe.LINE_LOOP||e===pe.LINE_STRIP||e===pe.TRIANGLES||e===pe.TRIANGLE_STRIP||e===pe.TRIANGLE_FAN}},xe=Object.freeze(pe);e.BoundingSphere=q,e.GeographicProjection=c,e.Intersect=l,e.Interval=d,e.Matrix3=f,e.Matrix4=g,e.PrimitiveType=xe}));
